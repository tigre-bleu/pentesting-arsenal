#!/usr/bin/env python3

from fuzzywuzzy import fuzz
from fuzzywuzzy import process
import sys

import json
import os

class bcolors:
    HEADER = '\033[95m'
    OKBLUE = '\033[94m'
    OKGREEN = '\033[92m'
    WARNING = '\033[93m'
    FAIL = '\033[91m'
    ENDC = '\033[0m'
    BOLD = '\033[1m'
    UNDERLINE = '\033[4m'

pathname = os.path.dirname(sys.argv[0])        
fullpath = os.path.abspath(pathname)

with open(fullpath+'/cheats.txt') as json_file:
    cheats = json.load(json_file)

search=' '.join(sys.argv[1:])

results = process.extract(search, cheats.keys(), limit=10)

for result in results:
    ratio = result[1]

    if ratio >= 90:
        color = bcolors.OKGREEN + bcolors.BOLD
    elif ratio >= 70:
        color = bcolors.OKGREEN
    elif ratio >= 50:
        color = bcolors.OKBLUE
    else:
        color = ""

    # Do not print if ratio is too low
    if ratio > 50:
        print(color + bcolors.UNDERLINE)
        #print("===[ " +result[0]+" ]===")
        print(result[0] + ":" + bcolors.ENDC)
        print(cheats[result[0]] + bcolors.ENDC)

print("")
