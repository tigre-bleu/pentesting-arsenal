#!/bin/sh

SCRIPT=`realpath $0`
SCRIPTPATH=`dirname $SCRIPT`
DEST_PATH="$SCRIPTPATH/../3rdparty"

# MimiKatz

OUTPUT_DIR="$DEST_PATH/MimiKatz"
REPO_API="https://api.github.com/repos/gentilkiwi/mimikatz/releases/latest"
mkdir -p $OUTPUT_DIR
ZIP_FILE="mimikatz_trunk.zip"
curl -s $REPO_API \
| grep "$ZIP_FILE" \
| cut -d : -f 2,3 \
| tr -d \" \
| wget -O $OUTPUT_DIR/$ZIP_FILE -i -
unzip -o -d $OUTPUT_DIR $OUTPUT_DIR/$ZIP_FILE
rm $OUTPUT_DIR/$ZIP_FILE

# ========================================================

# Pspy

OUTPUT_DIR="$DEST_PATH/LaZagne"
REPO_API="https://api.github.com/repos/AlessandroZ/LaZagne/releases/latest"
mkdir -p $OUTPUT_DIR
FILE="lazagne.exe"
curl -s $REPO_API \
| grep "$FILE" \
| cut -d : -f 2,3 \
| tr -d \" \
| wget -O $OUTPUT_DIR/$FILE -i -

# ========================================================

# Pspy

OUTPUT_DIR="$DEST_PATH/pspy"
REPO_API="https://api.github.com/repos/DominicBreuker/pspy/releases/latest"
mkdir -p $OUTPUT_DIR
FILE="pspy64"
curl -s $REPO_API \
| grep "$FILE" \
| cut -d : -f 2,3 \
| tr -d \" \
| wget -O $OUTPUT_DIR/$FILE -i -

FILE="pspy32"
curl -s $REPO_API \
| grep "$FILE" \
| cut -d : -f 2,3 \
| tr -d \" \
| wget -O $OUTPUT_DIR/$FILE -i -

FILE="pspy64s"
curl -s $REPO_API \
| grep "$FILE" \
| cut -d : -f 2,3 \
| tr -d \" \
| wget -O $OUTPUT_DIR/$FILE -i -

FILE="pspy32s"
curl -s $REPO_API \
| grep "$FILE" \
| cut -d : -f 2,3 \
| tr -d \" \
| wget -O $OUTPUT_DIR/$FILE -i -
